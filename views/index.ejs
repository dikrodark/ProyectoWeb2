<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Catálogo de Libros</title>
    <link rel="stylesheet" href="/styles.css">


    <style>
        body {
            background-color: #b9d8f0;
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        /* --- ENCABEZADO --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .logout-btn {
            background-color: #7b1fa2;
            padding: 8px 14px;
            border-radius: 6px;
            color: white;
            text-decoration: none;
            font-weight: bold;
        }

        .logout-btn:hover {
            background-color: #6a1b9a;
        }

        /* --- TABLA --- */
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        th, td {
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #1f5b8f;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #e9f2fb;
        }

        /* --- ENTRADAS --- */
        input[type="text"], input[type="number"] {
            width: 95%;
            padding: 6px;
            border-radius: 5px;
            border: 1px solid #7a7a7a;
        }

        /* --- BOTONES --- */
        .btn {
            padding: 6px 12px;
            border-radius: 5px;
            text-decoration: none;
            color: white;
            font-size: 14px;
        }

        .btn-edit {
            background-color: #1565c0;
        }

        .btn-delete {
            background-color: #c62828;
        }

        .btn-save {
            background-color: #2e7d32;
            border: none;
            cursor: pointer;
        }

        .btn-cancel {
            background-color: gray;
        }

        /* Formulario agregar */
        .form-add {
            background: white;
            padding: 15px;
            border-radius: 8px;
            width: 50%;
        }
    </style>

</head>
<body>

    <!-- ENCABEZADO -->
    <div class="header">
        <h1>Catálogo de Libros</h1>

        <a href="/logout" class="logout-btn">Cerrar sesión</a>
    </div>

    <!-- BOTÓN AGREGAR USUARIO -->
<div style="margin-bottom: 20px;">
    <a href="/usuarios/agregar" 
       style="
            background-color: #ff9800;
            padding: 10px 16px;
            border-radius: 6px;
            color: white;
            font-weight: bold;
            text-decoration: none;
        ">
        Agregar Usuario
    </a>
</div>


    <table>
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Autor</th>
            <th>Editorial</th>
            <th>Precio</th>
            <th>Acciones</th>
        </tr>

        <% libros.forEach(libro => { %>
        <tr>
            <td><%= libro.id %></td>

            <% if (editBook && editBook.id === libro.id) { %>

                <form action="/update/<%= libro.id %>" method="POST">
                    <td><input type="text" name="nombre" value="<%= editBook.nombre %>" required></td>
                    <td><input type="text" name="autor" value="<%= editBook.autor %>" required></td>
                    <td><input type="text" name="editorial" value="<%= editBook.editorial %>" required></td>
                    <td><input type="number" step="0.01" name="precio" value="<%= editBook.precio %>" required></td>

                    <td>
                        <button class="btn btn-save" type="submit">Guardar</button>
                        <a href="/libros" class="btn btn-cancel">Cancelar</a>
                    </td>
                </form>

            <% } else { %>

                <td><%= libro.nombre %></td>
                <td><%= libro.autor %></td>
                <td><%= libro.editorial %></td>
                <td>$<%= libro.precio %></td>

                <td>
                    <a class="btn btn-edit" href="/edit/<%= libro.id %>">Editar</a>
                    <a class="btn btn-delete" href="/delete/<%= libro.id %>">Eliminar</a>
                </td>

            <% } %>
        </tr>
        <% }); %>
    </table>


    <% if (!editBook) { %>
    <h3>Agregar Libro</h3>

    <form class="form-add" action="/add" method="POST">
        <label>Nombre:</label>
        <input type="text" name="nombre" required><br><br>

        <label>Autor:</label>
        <input type="text" name="autor" required><br><br>

        <label>Editorial:</label>
        <input type="text" name="editorial" required><br><br>

        <label>Precio:</label>
        <input type="number" step="0.01" name="precio" required><br><br>

        <button class="btn btn-save" type="submit">Agregar</button>
    </form>
    <% } %>


    <%- include('footer') %>


</body>
</html>
